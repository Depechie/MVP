<?xml version="1.0" encoding="UTF-8"?>
<pages:BaseContentPage BackgroundColor="{StaticResource light_primary}"
                       xmlns="http://xamarin.com/schemas/2014/forms"
                       xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                       NavigationPage.HasNavigationBar="False"
                       xmlns:vm="clr-namespace:MVP.ViewModels"
                       xmlns:xct="clr-namespace:Xamarin.CommunityToolkit.Effects;assembly=Xamarin.CommunityToolkit"
                       xmlns:ff="clr-namespace:FFImageLoading.Forms;assembly=FFImageLoading.Forms"
                       xmlns:custom="clr-namespace:Xamarin.Forms.PancakeView;assembly=Xamarin.Forms.PancakeView"
                       xmlns:models="clr-namespace:MVP.Models"
                       xmlns:helpers="clr-namespace:MVP.Helpers"
                       xmlns:pages="clr-namespace:MVP.Pages"
                       helpers:StatusBar.StatusBarStyle="DarkText"
                       x:Class="MVP.Pages.IntroPage"
                       x:TypeArguments="vm:IntroViewModel"
                       x:DataType="vm:IntroViewModel">

    <Grid RowDefinitions="*, Auto">

        <Grid Grid.RowSpan="2" HorizontalOptions="Fill" Padding="40" xct:SafeAreaEffect.SafeArea="false,true,false,false">

            <ff:CachedImage x:Name="phoneImage" Source="onboarding1.png" FadeAnimationEnabled="True"
                            FadeAnimationForCachedImages="True" FadeAnimationDuration="500"
                            Aspect="AspectFit" HorizontalOptions="Fill" />

            <custom:PancakeView x:Name="pillbox">
                <Label Text="Welcome MVP!" />
            </custom:PancakeView>
        </Grid>

        <CarouselView x:Name="carousel" IndicatorView="indicator" IsBounceEnabled="False"
                      ItemsSource="{Binding OnboardingItems}" HorizontalScrollBarVisibility="Never"
                      VerticalScrollBarVisibility="Never" PositionChanged="CarouselView_PositionChanged">
            <CarouselView.ItemTemplate>
                <DataTemplate x:DataType="models:OnboardingItem">
                    <Grid RowDefinitions="3*, *">
                        <StackLayout HeightRequest="100" Spacing="12" Padding="40" Grid.Row="1"
                                     VerticalOptions="End" BackgroundColor="{StaticResource white}">
                            <Label Text="{Binding Title}" />
                            <Label Text="{Binding Description}" />
                        </StackLayout>
                    </Grid>
                </DataTemplate>
            </CarouselView.ItemTemplate>
        </CarouselView>

        <Grid HorizontalOptions="Fill" Grid.Row="1" RowSpacing="8"
              BackgroundColor="{StaticResource white}" ColumnDefinitions="*, 2*, *">

            <IndicatorView Grid.Row="0" Grid.Column="1" x:Name="indicator" Opacity=".5"
                           IndicatorColor="{StaticResource gray}" SelectedIndicatorColor="{StaticResource primary}"  />

            <Button Grid.Row="1" Grid.Column="1" Text="Get started" Command="{Binding SignInCommand}"
                    Margin="0,0,0,24" xct:SafeAreaEffect.SafeArea="false,false,false,true" />
        </Grid>
    </Grid>

</pages:BaseContentPage>
