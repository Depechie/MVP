<?xml version="1.0" encoding="UTF-8"?>
<pages:BaseContentPage xmlns:pages="clr-namespace:MVP.Pages"
    x:Name="page"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="MVP.Pages.ContributionsPage"
    xmlns:vm="clr-namespace:MVP.ViewModels"
    xmlns:xct="clr-namespace:Xamarin.CommunityToolkit.Effects;assembly=Xamarin.CommunityToolkit"
    xmlns:helpers="clr-namespace:MVP.Helpers"
    helpers:StatusBar.StatusBarStyle="DarkText"
    xmlns:icons="clr-namespace:MVP.Styles"
    xmlns:local="clr-namespace:MVP"
    x:TypeArguments="vm:ContributionsViewModel"
    x:DataType="vm:ContributionsViewModel">

    <local:AppFrame x:Name="appFrame" Title="Community activities" xct:SafeAreaEffect.SafeArea="false,true,false,false"
                    ShowSecondaryButton="True" SecondaryButtonIcon="{x:Static icons:Icons.plus}">
        <local:AppFrame.Content>
            <Grid>
                <CollectionView x:Name="collectionView" ItemsUpdatingScrollMode="KeepScrollOffset"
                        Scrolled="CollectionView_Scrolled"
                        ItemsSource="{Binding Contributions}"
                        ItemTemplate="{StaticResource contribution_item}"
                        SelectedItem="{Binding SelectedContribution}"
                        SelectionMode="Single">

                    <CollectionView.Footer>
                        <BoxView HeightRequest="40" />
                    </CollectionView.Footer>

                    <CollectionView.Header>
                        <StackLayout Padding="16,16,16,24">
                            <Frame BackgroundColor="{StaticResource background_gray}" HeightRequest="48" CornerRadius="24">

                                <Grid ColumnDefinitions="*,48" Padding="24,0" VerticalOptions="Center">

                                    <Label Text="Search..." BackgroundColor="Transparent" FontSize="15" VerticalOptions="Center"
                                           FontFamily="{StaticResource font_regular}" TextColor="{StaticResource gray}" />

                                    <Label Grid.Column="1" Text="{x:Static icons:Icons.search}" HorizontalOptions="End"
                                           HorizontalTextAlignment="End" FontFamily="{StaticResource font_icon}"
                                           VerticalOptions="Center" VerticalTextAlignment="Center"
                                           TextColor="{StaticResource gray}"/>

                                </Grid>
                            </Frame>
                        </StackLayout>
                    </CollectionView.Header>
                </CollectionView>

            </Grid>
        </local:AppFrame.Content>
    </local:AppFrame>
</pages:BaseContentPage>
